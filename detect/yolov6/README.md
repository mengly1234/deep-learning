# yolov6
yolov6主要是使用重新参数化的方法，训练和推理的时候使用不同的模型结构，从而在不影响训练的情况下，加速推理的速度。

## backbone

yolov6训练时的主干网络主要是repvgg的结构模块，具体来说，每一个小的模块都是由3X3卷积、1X1卷积以及恒等映射组成的，并行多个分子和一般能增加模型的表征能力，而在推理的阶段，为了加快推理速度，将这三者融合成一个3X3的卷积。

## RepPANNeck

具体来说就是将CSP-PAN里面的CSP模块替换成repvgg的模块，整体结构和v5没有什么差别。


## head部分

yolov5的检测头部分，分类和回归是耦合在一起的，使用相同的特征来同时预测目标的类别和位置这种方式可能会导致任务之间的干扰，v6使用和yolovx使用相同的方式。优势如下：  
（1）将检测和分类的任务解耦，使用两个分支去分别预测类别和位置，使得每个分支能够专注自己的任务，不至于混淆。  
（2）而且解耦头的设计使得模型有更高的灵活性，可以针对不同任务设计不同的损失函数和训练策略。

## 锚框

yolov5是基于anchor的方法，yolov5可以加载训练的标签，通过聚类来计算出最佳的anchor组合。而yolov6是使用anchor-free的方式。  

anchor-free：  

anchor point：是featurer map中每个像素点的中心坐标  
预测框数量 = anchor point数量 = 80 * 80 + 40 * 40 + 20 * 20  
即每一个anchor point对应一个anchor

## 正样本匹配

将三层的feature map映射到原图上，标签框内框到所有点都作为正样本，其他的都作为负样本，当检测目标出现重叠情况时，两个真实框框到的anchor point是有重叠的，那么这部分重叠的anchor point对应的anchor负责哪个目标的检测呢？这里需要计算anchor和真实框的iou值，通过比较anchor与真实框的重叠面积大小来判断这个anchor应该负责哪个目标的检测。